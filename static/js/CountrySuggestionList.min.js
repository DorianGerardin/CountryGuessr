class CountrySuggestionList{constructor(t,e,s){this.allCountriesList=t,this.list=[],this.countryInput=s,this.container=e,this.currentFocusIndex=0,this.countryInput.addEventListener("keydown",t=>this.UpdateFocused(t))}IsEmpty(){return 0===this.list.length}Show(t){this.currentFocusIndex=0,this.container.innerHTML="",this.container.style.display="flex",this.UpdateCountrySuggestionList(t)}Hide(){this.currentFocusIndex=0,this.container.style.display="none",this.container.innerHTML=""}UpdateCountrySuggestionList(t){this.list=0===this.countryInput.value.length?this.allCountriesList:t;for(let t=0;t<this.list.length;t++){let e=document.createElement("div");e.classList.add("suggestion");let s=document.createElement("img");s.classList.add("flagList"),s.src=`./static/images/flags/${this.list[t].code}.svg`;let i=document.createElement("div");i.innerHTML=this.list[t].name,e.appendChild(s),e.appendChild(i),e.addEventListener("click",()=>{this.SelectCountry(t)}),e.addEventListener("mouseover",()=>{this.UnfocusCurrent(),this.currentFocusIndex=t,this.ToggleFocus(e,!0)}),e.addEventListener("mouseout",()=>{this.ToggleFocus(e,!1)}),this.container.appendChild(e)}0!==this.list.length?(this.ToggleFocus(this.container.children[0],!0),this.container.children[0].scrollIntoViewIfNeeded?this.container.children[0].scrollIntoViewIfNeeded(!1):this.container.children[0].scrollIntoView({block:"nearest",inline:"nearest"})):this.Hide()}SelectCountry(t){this.Hide(),this.countryInput.value=this.list[t].name,this.countryInput.focus(),currentCountry=this.list[t].code,this.container.innerHTML="",this.currentFocusIndex=0,this.list=[]}ToggleFocus(t,e){e?t.classList.add("suggestionFocus"):t.classList.remove("suggestionFocus")}UnfocusCurrent(){if(this.currentFocusIndex>=0&&this.currentFocusIndex<this.list.length){let t=this.container.children[this.currentFocusIndex];this.ToggleFocus(t,!1)}}SetNewFocus(t){this.UnfocusCurrent();let e=this.container.children[t];this.ToggleFocus(e,!0),this.countryInput.value=e.innerText,this.container.children[t].scrollIntoViewIfNeeded?this.container.children[t].scrollIntoViewIfNeeded(!1):this.container.children[t].scrollIntoView({block:"nearest",inline:"nearest"}),this.currentFocusIndex=t}UpdateFocused(t){if(0!==this.list.length)if(40===t.keyCode){t.preventDefault();let e=this.currentFocusIndex+1>=this.list.length?0:this.currentFocusIndex+1;this.SetNewFocus(e)}else if(38===t.keyCode){t.preventDefault();let e=this.currentFocusIndex-1<0?this.list.length-1:this.currentFocusIndex-1;this.SetNewFocus(e)}else"Enter"===t.key&&this.list.length>0&&this.SelectCountry(this.currentFocusIndex)}}